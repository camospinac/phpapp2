import{d as C,k as P,c as i,o as d,a as r,u as o,h as D,w as u,b as e,g as m,i as N,m as S,j as g,p as j,F as c,r as x,t as l,n as _,q as E,l as L}from"./app-BQnH1ZEo.js";import{_ as $}from"./AppLayout.vue_vue_type_script_setup_true_lang-4O02rZHV.js";import{_ as b}from"./index-KcLK0tTn.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-QpNPZ925.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-CYjPtEpa.js";import{S as z,F as B}from"./search-CahvFzOo.js";import"./useForwardExpose-BM3Qfcfh.js";import"./x-CEnJsh2w.js";import"./createLucideIcon-BOMx47jT.js";const M={class:"p-4 md:p-6 rounded-xl border bg-card text-card-foreground"},R={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 border rounded-lg items-end"},T={class:"flex space-x-2"},U=["href"],A={key:0,class:"flex items-center justify-center h-[40vh] text-muted-foreground"},H={key:1,class:"overflow-x-auto"},O={class:"min-w-full text-sm text-left"},q={class:"px-4 py-3 font-medium text-muted-foreground"},I={class:"px-4 py-3"},X={class:"px-4 py-3"},G={class:"px-4 py-3 font-mono text-right"},J={class:"px-4 py-3 text-center"},K={class:"px-4 py-3 text-right text-muted-foreground"},Q={key:0,class:"flex justify-center mt-6"},W={class:"flex space-x-1"},de=C({__name:"Payments",props:{payments:{},filters:{}},setup(v){const p=v,h=[{title:"Admin",href:route("admin.dashboard")},{title:"Reportes",href:"#"},{title:"Pagos",href:route("admin.reports.payments")}],n=P({start_date:p.filters.start_date??"",end_date:p.filters.end_date??"",status:p.filters.status??""}),w=()=>{g.get(route("admin.reports.payments"),n.value,{preserveState:!0,replace:!0})},k=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(a),F=a=>new Date(a).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return(a,s)=>(d(),i(c,null,[r(o(D),{title:"Reporte de Pagos"}),r($,{breadcrumbs:h},{default:u(()=>[e("div",M,[s[10]||(s[10]=e("h3",{class:"text-xl font-semibold mb-4"},"Reporte Detallado de Pagos",-1)),e("div",R,[e("div",null,[r(o(f),{for:"start_date"},{default:u(()=>s[4]||(s[4]=[m("Fecha de Pago (Desde)",-1)])),_:1,__:[4]}),r(o(y),{id:"start_date",type:"date",modelValue:n.value.start_date,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value.start_date=t)},null,8,["modelValue"])]),e("div",null,[r(o(f),{for:"end_date"},{default:u(()=>s[5]||(s[5]=[m("Fecha de Pago (Hasta)",-1)])),_:1,__:[5]}),r(o(y),{id:"end_date",type:"date",modelValue:n.value.end_date,"onUpdate:modelValue":s[1]||(s[1]=t=>n.value.end_date=t)},null,8,["modelValue"])]),e("div",null,[r(o(f),{for:"status"},{default:u(()=>s[6]||(s[6]=[m("Estado",-1)])),_:1,__:[6]}),N(e("select",{id:"status","onUpdate:modelValue":s[2]||(s[2]=t=>n.value.status=t),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm"},s[7]||(s[7]=[e("option",{value:""},"Todos los estados",-1),e("option",{value:"pending"},"Pendiente",-1),e("option",{value:"accredited"},"Acreditado",-1),e("option",{value:"paid"},"Pagado",-1),e("option",{value:"reinvested"},"Reinvertido",-1)]),512),[[S,n.value.status]])]),e("div",T,[r(o(b),{onClick:w,size:"icon",title:"Aplicar Filtros"},{default:u(()=>[r(o(z),{class:"h-4 w-4"})]),_:1}),r(o(b),{onClick:s[3]||(s[3]=t=>o(g).visit(a.route("admin.reports.payments"))),variant:"outline",size:"icon",title:"Limpiar Filtros"},{default:u(()=>[r(o(B),{class:"h-4 w-4"})]),_:1}),e("a",{href:a.route("admin.reports.payments.export",n.value),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 w-full"}," Exportar a Excel ",8,U)])]),a.payments.data.length===0?(d(),i("div",A,s[8]||(s[8]=[e("p",null,"No se encontraron pagos con los filtros seleccionados.",-1)]))):(d(),i("div",H,[e("table",O,[s[9]||(s[9]=e("thead",{class:"border-b"},[e("tr",null,[e("th",{class:"px-4 py-3 font-medium"},"# Pago"),e("th",{class:"px-4 py-3 font-medium"},"Usuario"),e("th",{class:"px-4 py-3 font-medium"},"# Documento"),e("th",{class:"px-4 py-3 font-medium text-right"},"Monto"),e("th",{class:"px-4 py-3 font-medium text-center"},"Estado"),e("th",{class:"px-4 py-3 font-medium text-right"},"Fecha de Vencimiento")])],-1)),e("tbody",null,[(d(!0),i(c,null,x(a.payments.data,t=>(d(),i("tr",{key:t.id,class:"border-b"},[e("td",q,l(t.id),1),e("td",I,l(t.subscription.user.nombres)+" "+l(t.subscription.user.apellidos),1),e("td",X,l(t.subscription.user.identification_number),1),e("td",G,l(k(t.amount)),1),e("td",J,[e("span",{class:_(["px-2 py-1 text-xs font-semibold rounded-full capitalize",{"bg-yellow-100 text-yellow-800":t.status==="pending","bg-green-100 text-green-800":t.status==="paid","bg-blue-100 text-blue-800":t.status==="accredited","bg-purple-100 text-purple-800":t.status==="reinvested"}])},l(t.status),3)]),e("td",K,l(F(t.payment_due_date)),1)]))),128))])]),a.payments.links.length>3?(d(),i("div",Q,[e("nav",W,[(d(!0),i(c,null,x(a.payments.links,(t,V)=>(d(),E(o(L),{key:V,href:t.url??"#",class:_(["px-3 py-1 text-sm rounded-md transition-colors",{"bg-primary text-primary-foreground hover:bg-primary/90":t.active,"hover:bg-muted":!!t.url,"text-muted-foreground cursor-not-allowed":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),128))])])):j("",!0)]))])]),_:1})],64))}});export{de as default};
