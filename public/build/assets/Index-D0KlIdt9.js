import{d as N,k as y,e as w,c as m,o as u,a as r,u as t,h as O,w as l,b as e,g as n,F as x,r as h,t as d,n as B,f as A,p as G,i as k,m as C}from"./app-BmG_DPBB.js";import{_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-ZWIXegjN.js";import{_ as f}from"./index-BepxCu8Q.js";import{_ as L,a as z}from"./DialogContent.vue_vue_type_script_setup_true_lang-B-uOgpqf.js";import{_ as R}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bpll06ee.js";import{_ as j,a as q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DdFpRgSU.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-BkqFe9mj.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-DndlePdc.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-DuLGDyvX.js";import"./useForwardExpose-DIVISxOl.js";import"./x-C_usZcIN.js";import"./createLucideIcon-DJpdnZzD.js";const H={class:"p-4 sm:p-6 lg:p-8"},J={class:"sm:flex sm:items-center"},K={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"},P={class:"mt-8 flow-root"},Q={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},W={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},X={class:"min-w-full divide-y divide-border"},Y={class:"divide-y divide-border"},Z={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-foreground sm:pl-0"},ss={class:"whitespace-nowrap px-3 py-4 text-sm text-muted-foreground"},es={class:"whitespace-nowrap px-3 py-4 text-sm text-muted-foreground"},ts={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},os={key:0,class:"grid grid-cols-4 items-center gap-4"},as={class:"col-span-3"},rs=["value"],ls={class:"grid grid-cols-4 items-center gap-4"},is={class:"col-span-3"},ns={class:"grid grid-cols-4 items-center gap-4"},ds={class:"col-span-3"},ms={class:"grid grid-cols-4 items-center gap-4"},us={class:"col-span-3"},Cs=N({__name:"Index",props:{transactions:{},users:{}},setup($){const b=$,p=y(!1),c=y(!1),o=w({id:"",id_user:"",tipo:"abono",monto:0,observacion:""}),E=()=>{c.value=!1,o.reset(),o.clearErrors(),p.value=!0},S=i=>{c.value=!0,o.id=i.id,o.id_user=i.id_user,o.tipo=i.tipo,o.monto=i.monto,o.observacion=i.observacion,o.clearErrors(),p.value=!0},g=()=>{p.value=!1},T=()=>{c.value?o.patch(route("admin.transactions.update",o.id),{preserveScroll:!0,onSuccess:()=>g()}):o.post(route("admin.transactions.store"),{preserveScroll:!0,onSuccess:()=>g()})},M=i=>{confirm("¿Estás seguro de eliminar esta transacción?")&&w({}).delete(route("admin.transactions.destroy",i.id),{preserveScroll:!0})},U=[{title:"Dashboard",href:route("dashboard")},{title:"Transacciones",href:route("admin.transactions.index")}],D=i=>{const s={year:"numeric",month:"short",day:"numeric"};return new Date(i).toLocaleDateString("es-CO",s)};return(i,s)=>(u(),m(x,null,[r(t(O),{title:"Gestión de Transacciones"}),r(I,{breadcrumbs:U},{default:l(()=>[e("div",H,[e("div",J,[s[6]||(s[6]=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-base font-semibold leading-6 text-foreground"},"Transacciones"),e("p",{class:"mt-2 text-sm text-muted-foreground"}," Una lista de todas las transacciones registradas en el sistema. ")],-1)),e("div",K,[r(t(f),{onClick:E},{default:l(()=>s[5]||(s[5]=[n("Añadir Transacción",-1)])),_:1,__:[5]})])]),e("div",P,[e("div",Q,[e("div",W,[e("table",X,[s[9]||(s[9]=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-foreground sm:pl-0"},"Usuario"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Tipo"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Monto"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Fecha"),e("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[e("span",{class:"sr-only"},"Edit")])])],-1)),e("tbody",Y,[(u(!0),m(x,null,h(b.transactions,a=>(u(),m("tr",{key:a.id},[e("td",Z,d(a.user?.nombres)+" "+d(a.user?.apellidos),1),e("td",{class:B(["whitespace-nowrap px-3 py-4 text-sm font-semibold",a.tipo==="abono"?"text-green-500":"text-red-500"])},d(a.tipo),3),e("td",ss,d(new Intl.NumberFormat("es-CO").format(a.monto)),1),e("td",es,d(D(a.created_at)),1),e("td",ts,[r(t(f),{variant:"ghost",onClick:F=>S(a),class:"mr-2"},{default:l(()=>s[7]||(s[7]=[n("Editar",-1)])),_:2,__:[7]},1032,["onClick"]),r(t(f),{variant:"destructive",onClick:F=>M(a)},{default:l(()=>s[8]||(s[8]=[n("Eliminar",-1)])),_:2,__:[8]},1032,["onClick"])])]))),128))])])])])])]),r(t(L),{open:p.value,"onUpdate:open":s[4]||(s[4]=a=>p.value=a)},{default:l(()=>[r(t(z),{class:"sm:max-w-lg"},{default:l(()=>[r(t(j),null,{default:l(()=>[r(t(q),null,{default:l(()=>[n(d(c.value?"Editar Transacción":"Crear Nueva Transacción"),1)]),_:1})]),_:1}),e("form",{onSubmit:A(T,["prevent"]),class:"grid gap-4 py-4"},[c.value?G("",!0):(u(),m("div",os,[r(t(_),{for:"id_user",class:"text-right"},{default:l(()=>s[10]||(s[10]=[n("Usuario",-1)])),_:1,__:[10]}),e("div",as,[k(e("select",{id:"id_user","onUpdate:modelValue":s[0]||(s[0]=a=>t(o).id_user=a),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[s[11]||(s[11]=e("option",{disabled:"",value:""},"Selecciona un usuario",-1)),(u(!0),m(x,null,h(b.users,a=>(u(),m("option",{key:a.id,value:a.id},d(a.nombres)+" "+d(a.apellidos),9,rs))),128))],512),[[C,t(o).id_user]]),r(v,{message:t(o).errors.id_user,class:"mt-1"},null,8,["message"])])])),e("div",ls,[r(t(_),{for:"tipo",class:"text-right"},{default:l(()=>s[12]||(s[12]=[n("Tipo",-1)])),_:1,__:[12]}),e("div",is,[k(e("select",{id:"tipo","onUpdate:modelValue":s[1]||(s[1]=a=>t(o).tipo=a),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},s[13]||(s[13]=[e("option",{value:"abono"},"Abono",-1),e("option",{value:"retiro"},"Retiro",-1)]),512),[[C,t(o).tipo]]),r(v,{message:t(o).errors.tipo,class:"mt-1"},null,8,["message"])])]),e("div",ns,[r(t(_),{for:"monto",class:"text-right"},{default:l(()=>s[14]||(s[14]=[n("Monto",-1)])),_:1,__:[14]}),e("div",ds,[r(t(V),{id:"monto",type:"number",modelValue:t(o).monto,"onUpdate:modelValue":s[2]||(s[2]=a=>t(o).monto=a),step:"0.01",class:"w-full"},null,8,["modelValue"]),r(v,{message:t(o).errors.monto,class:"mt-1"},null,8,["message"])])]),e("div",ms,[r(t(_),{for:"observacion",class:"text-right"},{default:l(()=>s[15]||(s[15]=[n("Observación",-1)])),_:1,__:[15]}),e("div",us,[r(t(V),{id:"observacion",modelValue:t(o).observacion,"onUpdate:modelValue":s[3]||(s[3]=a=>t(o).observacion=a),class:"w-full"},null,8,["modelValue"]),r(v,{message:t(o).errors.observacion,class:"mt-1"},null,8,["message"])])]),r(t(R),null,{default:l(()=>[r(t(f),{type:"button",variant:"secondary",onClick:g},{default:l(()=>s[16]||(s[16]=[n("Cancelar",-1)])),_:1,__:[16]}),r(t(f),{type:"submit",disabled:t(o).processing},{default:l(()=>s[17]||(s[17]=[n("Guardar",-1)])),_:1,__:[17]},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Cs as default};
