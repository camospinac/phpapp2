import{d as V,k as D,c as i,o as d,a as r,u as o,h as N,w as u,b as t,g as p,i as S,m as R,j as g,p as j,F as c,r as _,t as n,n as h,q as E,l as L}from"./app-BmG_DPBB.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-ZWIXegjN.js";import{_ as y}from"./index-BepxCu8Q.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-BkqFe9mj.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-DndlePdc.js";import{S as $,F as z}from"./search-BirCEaY9.js";import"./useForwardExpose-DIVISxOl.js";import"./x-C_usZcIN.js";import"./createLucideIcon-DJpdnZzD.js";const B={class:"p-4 md:p-6 rounded-xl border bg-card text-card-foreground"},M={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 border rounded-lg items-end"},T={class:"flex space-x-2"},U=["href"],A={key:0,class:"flex items-center justify-center h-[40vh] text-muted-foreground"},H={key:1,class:"overflow-x-auto"},O={class:"min-w-full text-sm text-left"},q={class:"px-4 py-3 font-mono font-bold"},I={class:"px-4 py-3"},W={class:"px-4 py-3"},X={class:"px-4 py-3 font-mono text-right"},G={class:"px-4 py-3 text-center"},J={class:"px-4 py-3 text-right text-muted-foreground"},K={class:"px-4 py-3 text-right text-muted-foreground"},Q={key:0,class:"flex justify-center mt-6"},Y={class:"flex space-x-1"},nt=V({__name:"Withdrawals",props:{withdrawals:{},filters:{}},setup(v){const m=v,w=[{title:"Admin",href:route("admin.dashboard")},{title:"Reportes",href:"#"},{title:"Retiros",href:route("admin.reports.withdrawals")}],l=D({start_date:m.filters.start_date??"",end_date:m.filters.end_date??"",status:m.filters.status??""}),C=()=>{g.get(route("admin.reports.withdrawals"),l.value,{preserveState:!0,replace:!0})},k=a=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(a),x=a=>new Date(a).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return(a,s)=>(d(),i(c,null,[r(o(N),{title:"Reporte de Retiros"}),r(P,{breadcrumbs:w},{default:u(()=>[t("div",B,[s[10]||(s[10]=t("h3",{class:"text-xl font-semibold mb-4"},"Reporte Detallado de Retiros",-1)),t("div",M,[t("div",null,[r(o(f),{for:"start_date"},{default:u(()=>s[4]||(s[4]=[p("Pagado Desde",-1)])),_:1,__:[4]}),r(o(b),{id:"start_date",type:"date",modelValue:l.value.start_date,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value.start_date=e)},null,8,["modelValue"])]),t("div",null,[r(o(f),{for:"end_date"},{default:u(()=>s[5]||(s[5]=[p("Pagado Hasta",-1)])),_:1,__:[5]}),r(o(b),{id:"end_date",type:"date",modelValue:l.value.end_date,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value.end_date=e)},null,8,["modelValue"])]),t("div",null,[r(o(f),{for:"status"},{default:u(()=>s[6]||(s[6]=[p("Estado",-1)])),_:1,__:[6]}),S(t("select",{id:"status","onUpdate:modelValue":s[2]||(s[2]=e=>l.value.status=e),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm"},s[7]||(s[7]=[t("option",{value:""},"Todos los estados",-1),t("option",{value:"pending"},"Pendiente",-1),t("option",{value:"completed"},"Completado",-1),t("option",{value:"cancelled"},"Cancelado",-1)]),512),[[R,l.value.status]])]),t("div",T,[r(o(y),{onClick:C,size:"icon",title:"Aplicar Filtros"},{default:u(()=>[r(o($),{class:"h-4 w-4"})]),_:1}),r(o(y),{onClick:s[3]||(s[3]=e=>o(g).visit(a.route("admin.reports.withdrawals"))),variant:"outline",size:"icon",title:"Limpiar Filtros"},{default:u(()=>[r(o(z),{class:"h-4 w-4"})]),_:1}),t("a",{href:a.route("admin.reports.withdrawals.export",l.value),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 w-full"}," Exportar a Excel ",8,U)])]),a.withdrawals.data.length===0?(d(),i("div",A,s[8]||(s[8]=[t("p",null,"No se encontraron retiros con los filtros seleccionados.",-1)]))):(d(),i("div",H,[t("table",O,[s[9]||(s[9]=t("thead",{class:"border-b"},[t("tr",null,[t("th",{class:"px-4 py-3 font-medium"},"CÃ³digo"),t("th",{class:"px-4 py-3 font-medium"},"Usuario"),t("th",{class:"px-4 py-3 font-medium"},"# Documento"),t("th",{class:"px-4 py-3 font-medium text-right"},"Monto"),t("th",{class:"px-4 py-3 font-medium text-center"},"Estado"),t("th",{class:"px-4 py-3 font-medium text-right"},"Fecha Solicitud"),t("th",{class:"px-4 py-3 font-medium text-right"},"Fecha Pago")])],-1)),t("tbody",null,[(d(!0),i(c,null,_(a.withdrawals.data,e=>(d(),i("tr",{key:e.id,class:"border-b"},[t("td",q,n(e.code),1),t("td",I,n(e.user.nombres)+" "+n(e.user.apellidos),1),t("td",W,n(e.user.identification_number),1),t("td",X,n(k(e.amount)),1),t("td",G,[t("span",{class:h(["px-2 py-1 text-xs font-semibold rounded-full capitalize",{"bg-yellow-100 text-yellow-800":e.status==="pending","bg-green-100 text-green-800":e.status==="completed","bg-red-100 text-red-800":e.status==="cancelled"}])},n(e.status),3)]),t("td",J,n(x(e.created_at)),1),t("td",K,n(e.status==="completed"?x(e.updated_at):"N/A"),1)]))),128))])]),a.withdrawals.links.length>3?(d(),i("div",Q,[t("nav",Y,[(d(!0),i(c,null,_(a.withdrawals.links,(e,F)=>(d(),E(o(L),{key:F,href:e.url??"#",class:h(["px-3 py-1 text-sm rounded-md transition-colors",{"bg-primary text-primary-foreground hover:bg-primary/90":e.active,"hover:bg-muted":!!e.url,"text-muted-foreground cursor-not-allowed":!e.url}]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])):j("",!0)]))])]),_:1})],64))}});export{nt as default};
