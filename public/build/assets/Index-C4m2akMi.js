import{d as j,k as x,e as w,s as P,c as y,o as C,a as l,u as e,h as T,w as r,b as o,g as i,F as U,r as z,l as G,t as n,f as Q,i as H,m as J}from"./app-BmG_DPBB.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-ZWIXegjN.js";import{_ as m}from"./index-BepxCu8Q.js";import{_ as k,a as E}from"./DialogContent.vue_vue_type_script_setup_true_lang-B-uOgpqf.js";import{_ as S}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BxQWf-Af.js";import{_ as W}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bpll06ee.js";import{_ as $,a as h}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DdFpRgSU.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-BkqFe9mj.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-DndlePdc.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-DuLGDyvX.js";import{c as X}from"./createLucideIcon-DJpdnZzD.js";import"./useForwardExpose-DIVISxOl.js";import"./x-C_usZcIN.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=X("ShieldAlertIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),Z={class:"p-4 sm:p-6 lg:p-8"},ss={class:"sm:flex sm:items-center"},es={class:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none flex items-center gap-4"},os={class:"mt-8 flow-root"},ls={class:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},ts={class:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},as={class:"min-w-full divide-y divide-border"},rs={class:"divide-y divide-border"},is={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-foreground sm:pl-0"},ds={class:"whitespace-nowrap px-3 py-4 text-sm text-muted-foreground"},ns={class:"whitespace-nowrap px-3 py-4 text-sm text-muted-foreground"},us={class:"whitespace-nowrap px-3 py-4 text-sm text-muted-foreground"},ms={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0"},ps={class:"grid grid-cols-4 items-center gap-4"},fs={class:"col-span-3"},cs={class:"grid grid-cols-4 items-center gap-4"},_s={class:"col-span-3"},gs={class:"grid grid-cols-4 items-center gap-4"},vs={class:"col-span-3"},xs={class:"grid grid-cols-4 items-center gap-4"},bs={class:"col-span-3"},ws={class:"grid grid-cols-4 items-center gap-4"},ys={class:"col-span-3"},Cs={class:"grid grid-cols-4 items-center gap-4"},Vs={class:"col-span-3"},Us={class:"grid grid-cols-4 items-center gap-4"},ks={class:"col-span-3"},Es={class:"py-4 space-y-4"},Ss={class:"grid gap-2"},$s={class:"flex justify-end"},M="BLOQUEAR A TODOS LOS USUARIOS",Ps=j({__name:"Index",props:{users:{}},setup(A){const O=A,c=x(!1),_=x(!1),t=w({id:"",nombres:"",apellidos:"",celular:"",email:"",rol:"usuario",password:"",password_confirmation:""}),B=()=>{_.value=!1,t.reset(),t.clearErrors(),c.value=!0},q=d=>{_.value=!0,t.id=d.id,t.nombres=d.nombres,t.apellidos=d.apellidos,t.celular=d.celular,t.email=d.email,t.rol=d.rol,t.password="",t.password_confirmation="",t.clearErrors(),c.value=!0},b=()=>{c.value=!1},N=()=>{_.value?t.patch(route("admin.users.update",t.id),{preserveScroll:!0,onSuccess:()=>b()}):t.post(route("admin.users.store"),{preserveScroll:!0,onSuccess:()=>b()})},D=d=>{confirm(`¿Estás seguro de que quieres eliminar a ${d.nombres} ${d.apellidos}?`)&&w({}).delete(route("admin.users.destroy",d.id),{preserveScroll:!0})},F=[{title:"Dashboard",href:route("dashboard")},{title:"Usuarios",href:route("admin.users.index")}],v=x(!1),g=x(""),L=P(()=>g.value===M),V=w({}),I=()=>{V.post(route("admin.users.block-all",{confirmation:g.value}),{onSuccess:()=>{v.value=!1,g.value=""}})};return(d,s)=>(C(),y(U,null,[l(e(T),{title:"Gestión de Usuarios"}),l(K,{breadcrumbs:F},{default:r(()=>[o("div",Z,[o("div",ss,[s[13]||(s[13]=o("div",{class:"sm:flex-auto"},[o("h1",{class:"text-base font-semibold leading-6 text-foreground"},"Usuarios"),o("p",{class:"mt-2 text-sm text-muted-foreground"}," Una lista de todos los usuarios de la aplicación. ")],-1)),o("div",es,[l(e(m),{onClick:s[0]||(s[0]=a=>v.value=!0),variant:"destructive",class:"flex items-center gap-2"},{default:r(()=>[l(e(Y),{class:"h-4 w-4"}),s[11]||(s[11]=i(" Bloqueo Masivo ",-1))]),_:1,__:[11]}),l(e(m),{onClick:B},{default:r(()=>s[12]||(s[12]=[i("Añadir Usuario",-1)])),_:1,__:[12]})])]),o("div",os,[o("div",ls,[o("div",ts,[o("table",as,[s[16]||(s[16]=o("thead",null,[o("tr",null,[o("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-foreground sm:pl-0"},"Nombre"),o("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Email"),o("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Celular"),o("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-foreground"},"Rol"),o("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-0"},[o("span",{class:"sr-only"},"Edit")])])],-1)),o("tbody",rs,[(C(!0),y(U,null,z(O.users,a=>(C(),y("tr",{key:a.id},[o("td",is,[l(e(G),{href:d.route("admin.users.show",a.id),class:"hover:text-primary hover:underline"},{default:r(()=>[i(n(a.nombres)+" "+n(a.apellidos),1)]),_:2},1032,["href"])]),o("td",ds,n(a.email),1),o("td",ns,n(a.celular),1),o("td",us,n(a.rol),1),o("td",ms,[l(e(m),{variant:"ghost",onClick:R=>q(a),class:"mr-2"},{default:r(()=>s[14]||(s[14]=[i("Editar",-1)])),_:2,__:[14]},1032,["onClick"]),l(e(m),{variant:"destructive",onClick:R=>D(a)},{default:r(()=>s[15]||(s[15]=[i("Eliminar",-1)])),_:2,__:[15]},1032,["onClick"])])]))),128))])])])])])]),l(e(k),{open:c.value,"onUpdate:open":s[8]||(s[8]=a=>c.value=a)},{default:r(()=>[l(e(E),{class:"sm:max-w-lg"},{default:r(()=>[l(e($),null,{default:r(()=>[l(e(h),null,{default:r(()=>[i(n(_.value?"Editar Usuario":"Crear Nuevo Usuario"),1)]),_:1}),l(e(S),null,{default:r(()=>s[17]||(s[17]=[i(" Completa los detalles del usuario. La contraseña solo es requerida al crear uno nuevo. ",-1)])),_:1,__:[17]})]),_:1}),o("form",{onSubmit:Q(N,["prevent"]),class:"grid gap-4 py-4"},[o("div",ps,[l(e(u),{for:"nombres",class:"text-right"},{default:r(()=>s[18]||(s[18]=[i("Nombres",-1)])),_:1,__:[18]}),o("div",fs,[l(e(p),{id:"nombres",modelValue:e(t).nombres,"onUpdate:modelValue":s[1]||(s[1]=a=>e(t).nombres=a),class:"w-full"},null,8,["modelValue"]),l(f,{message:e(t).errors.nombres,class:"mt-1"},null,8,["message"])])]),o("div",cs,[l(e(u),{for:"apellidos",class:"text-right"},{default:r(()=>s[19]||(s[19]=[i("Apellidos",-1)])),_:1,__:[19]}),o("div",_s,[l(e(p),{id:"apellidos",modelValue:e(t).apellidos,"onUpdate:modelValue":s[2]||(s[2]=a=>e(t).apellidos=a),class:"w-full"},null,8,["modelValue"]),l(f,{message:e(t).errors.apellidos,class:"mt-1"},null,8,["message"])])]),o("div",gs,[l(e(u),{for:"celular",class:"text-right"},{default:r(()=>s[20]||(s[20]=[i("Celular",-1)])),_:1,__:[20]}),o("div",vs,[l(e(p),{id:"celular",modelValue:e(t).celular,"onUpdate:modelValue":s[3]||(s[3]=a=>e(t).celular=a),class:"w-full"},null,8,["modelValue"]),l(f,{message:e(t).errors.celular,class:"mt-1"},null,8,["message"])])]),o("div",xs,[l(e(u),{for:"email",class:"text-right"},{default:r(()=>s[21]||(s[21]=[i("Email",-1)])),_:1,__:[21]}),o("div",bs,[l(e(p),{id:"email",type:"email",modelValue:e(t).email,"onUpdate:modelValue":s[4]||(s[4]=a=>e(t).email=a),class:"w-full"},null,8,["modelValue"]),l(f,{message:e(t).errors.email,class:"mt-1"},null,8,["message"])])]),o("div",ws,[l(e(u),{for:"rol",class:"text-right"},{default:r(()=>s[22]||(s[22]=[i("Rol",-1)])),_:1,__:[22]}),o("div",ys,[H(o("select",{id:"rol","onUpdate:modelValue":s[5]||(s[5]=a=>e(t).rol=a),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},s[23]||(s[23]=[o("option",{value:"usuario"},"Usuario",-1),o("option",{value:"admin"},"Admin",-1)]),512),[[J,e(t).rol]]),l(f,{message:e(t).errors.rol,class:"mt-1"},null,8,["message"])])]),o("div",Cs,[l(e(u),{for:"password",class:"text-right"},{default:r(()=>s[24]||(s[24]=[i("Contraseña",-1)])),_:1,__:[24]}),o("div",Vs,[l(e(p),{id:"password",type:"password",modelValue:e(t).password,"onUpdate:modelValue":s[6]||(s[6]=a=>e(t).password=a),class:"w-full"},null,8,["modelValue"]),l(f,{message:e(t).errors.password,class:"mt-1"},null,8,["message"])])]),o("div",Us,[l(e(u),{for:"password_confirmation",class:"text-right"},{default:r(()=>s[25]||(s[25]=[i("Confirmar",-1)])),_:1,__:[25]}),o("div",ks,[l(e(p),{id:"password_confirmation",type:"password",modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[7]||(s[7]=a=>e(t).password_confirmation=a),class:"w-full"},null,8,["modelValue"])])]),l(e(W),null,{default:r(()=>[l(e(m),{type:"button",variant:"secondary",onClick:b},{default:r(()=>s[26]||(s[26]=[i("Cancelar",-1)])),_:1,__:[26]}),l(e(m),{type:"submit",disabled:e(t).processing},{default:r(()=>[i(n(_.value?"Guardar Cambios":"Crear Usuario"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(k),{open:v.value,"onUpdate:open":s[10]||(s[10]=a=>v.value=a)},{default:r(()=>[l(e(E),{class:"sm:max-w-lg"},{default:r(()=>[l(e($),null,{default:r(()=>[l(e(h),{class:"text-xl text-destructive"},{default:r(()=>s[27]||(s[27]=[i("¡Acción de Emergencia!",-1)])),_:1,__:[27]}),l(e(S),null,{default:r(()=>s[28]||(s[28]=[i(" Estás a punto de bloquear las cuentas de TODOS los usuarios. Esta acción es irreversible a través de la interfaz. Para continuar, por favor escribe la siguiente frase exacta en el campo de abajo: ",-1)])),_:1,__:[28]})]),_:1}),o("div",Es,[o("div",{class:"p-3 bg-muted rounded-md text-center"},[o("p",{class:"font-mono font-bold text-destructive"},n(M))]),o("div",Ss,[l(e(u),{for:"confirmation"},{default:r(()=>s[29]||(s[29]=[i("Escribe la frase para confirmar",-1)])),_:1,__:[29]}),l(e(p),{id:"confirmation",modelValue:g.value,"onUpdate:modelValue":s[9]||(s[9]=a=>g.value=a)},null,8,["modelValue"])])]),o("div",$s,[l(e(m),{onClick:I,variant:"destructive",disabled:!L.value||e(V).processing},{default:r(()=>s[30]||(s[30]=[i(" Confirmar Bloqueo Masivo ",-1)])),_:1,__:[30]},8,["disabled"])])]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Ps as default};
