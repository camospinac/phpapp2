import{d as V,k as S,c as d,o as l,a as r,u as o,h as D,w as u,b as t,g as c,i as E,m as N,j as _,p as j,F as m,r as g,t as a,n as y,q as z,l as L}from"./app-BQnH1ZEo.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-4O02rZHV.js";import{_ as v}from"./index-KcLK0tTn.js";import{_ as h}from"./Input.vue_vue_type_script_setup_true_lang-QpNPZ925.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-CYjPtEpa.js";import{S as $,F as B}from"./search-CahvFzOo.js";import"./useForwardExpose-BM3Qfcfh.js";import"./x-CEnJsh2w.js";import"./createLucideIcon-BOMx47jT.js";const M={class:"p-4 md:p-6 rounded-xl border bg-card text-card-foreground"},U={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 p-4 border rounded-lg items-end"},A={class:"flex space-x-2"},O=["href"],P={key:0,class:"flex items-center justify-center h-[40vh] text-muted-foreground"},R={key:1,class:"overflow-x-auto"},H={class:"min-w-full text-sm text-left"},I={class:"px-4 py-3 font-medium"},q={class:"px-4 py-3 capitalize"},G={class:"px-4 py-3 text-muted-foreground"},X={class:"px-4 py-3 capitalize"},J={class:"px-4 py-3 font-mono text-right"},K={class:"px-4 py-3 font-mono text-right text-green-600"},Q={class:"px-4 py-3 text-center"},W={class:"px-4 py-3 text-right text-muted-foreground"},Y={key:0,class:"flex justify-center mt-6"},Z={class:"flex space-x-1"},dt=V({__name:"Subscriptions",props:{subscriptions:{},filters:{}},setup(b){const p=b,w=[{title:"Admin",href:route("admin.dashboard")},{title:"Reportes",href:"#"},{title:"Suscripciones",href:route("admin.reports.subscriptions")}],n=S({start_date:p.filters.start_date??"",end_date:p.filters.end_date??"",status:p.filters.status??""}),C=()=>{_.get(route("admin.reports.subscriptions"),n.value,{preserveState:!0,replace:!0})},x=i=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(i),F=i=>new Date(i).toLocaleDateString("es-CO",{year:"numeric",month:"short",day:"numeric"});return(i,s)=>(l(),d(m,null,[r(o(D),{title:"Reporte de Suscripciones"}),r(T,{breadcrumbs:w},{default:u(()=>[t("div",M,[s[10]||(s[10]=t("h3",{class:"text-xl font-semibold mb-4"},"Reporte Detallado de Suscripciones",-1)),t("div",U,[t("div",null,[r(o(f),{for:"start_date"},{default:u(()=>s[4]||(s[4]=[c("Fecha Inicio",-1)])),_:1,__:[4]}),r(o(h),{id:"start_date",type:"date",modelValue:n.value.start_date,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value.start_date=e)},null,8,["modelValue"])]),t("div",null,[r(o(f),{for:"end_date"},{default:u(()=>s[5]||(s[5]=[c("Fecha Fin",-1)])),_:1,__:[5]}),r(o(h),{id:"end_date",type:"date",modelValue:n.value.end_date,"onUpdate:modelValue":s[1]||(s[1]=e=>n.value.end_date=e)},null,8,["modelValue"])]),t("div",null,[r(o(f),{for:"status"},{default:u(()=>s[6]||(s[6]=[c("Estado",-1)])),_:1,__:[6]}),E(t("select",{id:"status","onUpdate:modelValue":s[2]||(s[2]=e=>n.value.status=e),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm"},s[7]||(s[7]=[t("option",{value:""},"Todos los estados",-1),t("option",{value:"active"},"Activa",-1),t("option",{value:"pending_verification"},"Pendiente",-1),t("option",{value:"completed"},"Completada",-1)]),512),[[N,n.value.status]])]),t("div",A,[r(o(v),{onClick:C,size:"icon",title:"Aplicar Filtros"},{default:u(()=>[r(o($),{class:"h-4 w-4"})]),_:1}),r(o(v),{onClick:s[3]||(s[3]=e=>o(_).visit(i.route("admin.reports.subscriptions"))),variant:"outline",size:"icon",title:"Limpiar Filtros"},{default:u(()=>[r(o(B),{class:"h-4 w-4"})]),_:1}),t("a",{href:i.route("admin.reports.subscriptions.export",n.value),class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-10 px-4 py-2 w-full"}," Exportar a Excel ",8,O)])]),i.subscriptions.data.length===0?(l(),d("div",P,s[8]||(s[8]=[t("p",null,"No se encontraron suscripciones con los filtros seleccionados.",-1)]))):(l(),d("div",R,[t("table",H,[s[9]||(s[9]=t("thead",{class:"border-b"},[t("tr",null,[t("th",{class:"px-4 py-3 font-medium"},"Usuario"),t("th",{class:"px-4 py-3 font-medium"},"# Documento"),t("th",{class:"px-4 py-3 font-medium"},"Plan"),t("th",{class:"px-4 py-3 font-medium"},"Tipo Contrato"),t("th",{class:"px-4 py-3 font-medium text-right"},"Monto"),t("th",{class:"px-4 py-3 font-medium text-right"},"Ganancia Esperada"),t("th",{class:"px-4 py-3 font-medium text-center"},"Estado"),t("th",{class:"px-4 py-3 font-medium text-right"},"Fecha CreaciÃ³n")])],-1)),t("tbody",null,[(l(!0),d(m,null,g(i.subscriptions.data,e=>(l(),d("tr",{key:e.id,class:"border-b"},[t("td",I,a(e.user.nombres)+" "+a(e.user.apellidos),1),t("td",q,a(e.user.identification_number),1),t("td",G,a(e.plan.name),1),t("td",X,a(e.contract_type),1),t("td",J,a(x(e.initial_investment)),1),t("td",K,"+"+a(x(e.profit_amount)),1),t("td",Q,[t("span",{class:y(["px-2 py-1 text-xs font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":e.status==="pending_verification","bg-green-100 text-green-800":e.status==="active","bg-gray-100 text-gray-800":e.status==="completed"}])},a(e.status.replace("_"," ")),3)]),t("td",W,a(F(e.created_at)),1)]))),128))])]),i.subscriptions.links.length>3?(l(),d("div",Y,[t("nav",Z,[(l(!0),d(m,null,g(i.subscriptions.links,(e,k)=>(l(),z(o(L),{key:k,href:e.url??"#",class:y(["px-3 py-1 text-sm rounded-md transition-colors",{"bg-primary text-primary-foreground hover:bg-primary/90":e.active,"hover:bg-muted":!!e.url,"text-muted-foreground cursor-not-allowed":!e.url}]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])):j("",!0)]))])]),_:1})],64))}});export{dt as default};
