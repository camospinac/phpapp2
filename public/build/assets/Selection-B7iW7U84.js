import{d as G,k as b,s as M,e as H,y as q,c as m,o as c,a as o,u as a,h as J,w as i,b as e,F as w,r as D,t as p,g as u,f as Q,p as S,n as $,i as z,C as N,q as K}from"./app-BQnH1ZEo.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-4O02rZHV.js";import{_ as X}from"./AuthLayout.vue_vue_type_script_setup_true_lang-B--MVaZn.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-CYjPtEpa.js";import{_ as x}from"./index-KcLK0tTn.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-QpNPZ925.js";import{_ as Y,a as Z}from"./DialogContent.vue_vue_type_script_setup_true_lang-Bwlrhvvf.js";import{_ as ee}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CZ-bXpA4.js";import{_ as te,a as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-msjhG0Vj.js";import{C as se,a as ne}from"./circle-plus-CXLjeB5K.js";import"./useForwardExpose-BM3Qfcfh.js";import"./x-CEnJsh2w.js";import"./createLucideIcon-BOMx47jT.js";const oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6"},le=["onClick"],re=["src"],ie={class:"p-6"},de={class:"text-xl font-semibold"},ue={class:"mt-2 text-base text-muted-foreground"},ce={key:0,class:"grid gap-6"},me={class:"relative"},pe={class:"relative flex justify-center text-xs uppercase"},fe=["value"],_e={class:"grid gap-2"},ge={class:"flex items-center space-x-4 rounded-md border p-2 bg-background"},ve={class:"grid gap-2"},be={class:"flex items-center justify-center gap-2"},xe={key:0,class:"grid gap-2"},ye={class:"rounded-md border"},he={class:"w-full text-base"},Ce={class:"p-2 text-left font-bold"},we={class:"p-2 text-right font-mono"},Pe={class:"p-2 text-right font-mono text-muted-foreground"},ke={key:1,class:"grid gap-6 animate-in fade-in-50"},De={class:"grid gap-2"},Se={class:"grid grid-cols-3 gap-3"},$e=["onClick"],je=["src","alt"],Fe={class:"text-xs font-medium"},Ie={class:"p-4 rounded-lg bg-muted text-center"},Me={class:"text-sm text-muted-foreground"},qe={class:"text-2xl font-mono font-bold my-2"},ze={class:"grid gap-2"},Ne={class:"flex items-center gap-4"},Ke=G({__name:"Selection",props:{plans:{}},setup(A){const y=b(1),j=b([{name:"Nequi",logo:"/img/logos/nequi.jpg",phone:"300 123 4567"},{name:"Daviplata",logo:"/img/logos/daviplata.png",phone:"310 987 6543"},{name:"Moovii",logo:"/img/logos/movi.jpg",phone:"320 555 1234"}]),h=b(j.value[0]),O=A,T=d=>{const t=Number(d);return isNaN(t)?"":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)},E=M(()=>s.amount===""?"":T(s.amount)),P=b(!1),C=b(null),s=H({plan_id:null,amount:"",receipt:null,investment_contract_type:"abierta"}),B=d=>{C.value=d,s.plan_id=d.id,P.value=!0},F=()=>{P.value=!1,s.reset(),C.value=null},I=M(()=>{if(!s.amount||!s.plan_id)return[];const d=parseFloat(s.amount);if(isNaN(d)||d<=0)return[];const t=O.plans.find(l=>l.id===s.plan_id);if(!t)return[];const r=[];if(s.investment_contract_type==="cerrada"){const l=t.closed_profit_percentage??50,n=t.closed_duration_days??90,g=d*(l/100)*3,k=d+g;let _=new Date;_.setDate(_.getDate()+n),r.push({label:`Pago √önico a ${n} d√≠as`,value:k,date:_.toISOString().split("T")[0]})}else{let l=new Date;if(l.setDate(l.getDate()+15),t.calculation_type==="fixed_plus_final"&&t.fixed_percentage){const n=d*(t.fixed_percentage/100);for(let g=1;g<=5;g++)r.push({label:`Pago ${g}`,value:n,date:l.toISOString().split("T")[0]}),l.setDate(l.getDate()+15);const f=d+n;r.push({label:"Pago Final",value:f,date:l.toISOString().split("T")[0]})}else if(t.calculation_type==="equal_installments"&&t.fixed_percentage){const f=d*(t.fixed_percentage/100)*6,k=(d+f)/6;for(let _=1;_<=6;_++)r.push({label:`Pago ${_} de 6`,value:k,date:l.toISOString().split("T")[0]}),l.setDate(l.getDate()+15)}}return r.map(l=>({...l,formattedValue:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(l.value)}))}),L=()=>{s.post(route("plan.store"),{onSuccess:()=>F()})},R=()=>{let r=parseFloat(s.amount)||0,l;r<2e6?l=1e5:l=1e6,r<2e5?r=2e5:r<1e7&&(r+=l),r>1e7&&(r=1e7),s.amount=String(r)},U=()=>{let t=parseFloat(s.amount),r;t<=2e6?r=1e5:r=1e6,t>2e5&&(t-=r),t<2e5&&(t=2e5),s.amount=String(t)};return(d,t)=>{const r=q("InputError"),l=q("LoaderCircle");return c(),m(w,null,[o(a(J),{title:"Seleccionar Plan"}),o(W,null,{default:i(()=>[o(X,{title:"Selecciona tu Plan",description:"Elige uno de nuestros planes para empezar.","show-logo":!1},{default:i(()=>[e("div",oe,[(c(!0),m(w,null,D(d.plans,n=>(c(),m("div",{key:n.id,onClick:f=>B(n),class:"rounded-xl border bg-card text-card-foreground shadow transition-all duration-200 cursor-pointer hover:ring-2 hover:ring-primary"},[e("img",{src:n.image_url??"https://placehold.co/600x400/gray/white?text=Plan",alt:"Imagen del Plan",class:"aspect-video w-full rounded-t-xl object-cover"},null,8,re),e("div",ie,[e("h3",de,p(n.name),1),e("p",ue,p(n.description),1)])],8,le))),128))]),o(a(Y),{open:P.value,"onUpdate:open":F},{default:i(()=>[o(a(Z),{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:i(()=>[o(a(te),null,{default:i(()=>[o(a(ae),{class:"text-2xl"},{default:i(()=>[u(p(C.value?.name),1)]),_:1}),o(a(ee),{class:"text-base"},{default:i(()=>[u(p(C.value?.description),1)]),_:1})]),_:1}),e("form",{onSubmit:Q(L,["prevent"]),class:"flex flex-col gap-6 pt-4"},[y.value===1?(c(),m("div",ce,[e("div",me,[e("div",pe,[o(a(v),{class:"text-lg"},{default:i(()=>t[5]||(t[5]=[u("¬øQu√© contrato te conviene?",-1)])),_:1,__:[5]})])]),t[13]||(t[13]=e("details",{class:"group border rounded-lg overflow-hidden"},[e("summary",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-muted"},[e("div",{class:"flex items-center gap-3"},[e("span",{class:"text-xl"},"üïäÔ∏è"),e("h4",{class:"font-semibold"},"Contrato Abierto")]),e("span",{class:"transition-transform duration-300 group-open:rotate-180"},"‚ñº")]),e("div",{class:"p-4 border-t text-base text-muted-foreground space-y-3"},[e("p",null,[e("strong",null,"Mayor control, liquidez y libertad.")]),e("p",null,"Ideal para quienes desean controlar de cerca sus ingresos y mantener flexibilidad a lo largo del tiempo."),e("div",{class:"p-3 bg-muted/50 rounded-md border"},[e("p",null,[e("strong",null,"Ejemplo de aplicaci√≥n:"),e("br"),u(" ‚òï Do√±a Rosa, 52 a√±os, vendedora de caf√©. Con esfuerzo sali√≥ adelante y hoy invierte en un Contrato Abierto que le da liquidez y ganancias cada 15 d√≠as. As√≠ vive m√°s holgada y con nuevas oportunidades para su negocio y su familia. ")])])])],-1)),t[14]||(t[14]=e("details",{class:"group border rounded-lg overflow-hidden"},[e("summary",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-muted"},[e("div",{class:"flex items-center gap-3"},[e("span",{class:"text-xl"},"üîí"),e("h4",{class:"font-semibold"},"Contrato Cerrado")]),e("span",{class:"transition-transform duration-300 group-open:rotate-180"},"‚ñº")]),e("div",{class:"p-4 border-t text-base text-muted-foreground space-y-3"},[e("p",null,[e("strong",null,"Mayor rendimiento, concentraci√≥n y a largo plazo.")]),e("p",null,"Ideal para quienes buscan maximizar resultados sin necesidad de retiros mensuales. "),e("div",{class:"p-3 bg-muted/50 rounded-md border"},[e("p",null,[e("strong",null,"Ejemplo de aplicaci√≥n:"),e("br"),u(" üì± Juli√°n, 38 a√±os, emprendedor. Empez√≥ arreglando celulares con lo justo, pero nunca dej√≥ de so√±ar. Hoy invierte en un contrato cerrado de 3 meses que le da rentabilidad y el impulso para cumplir metas y seguir creciendo.")])])])],-1)),e("input",{type:"hidden",name:"investment_contract_type",value:a(s).investment_contract_type},null,8,fe),e("div",_e,[o(a(v),{class:"text-lg"},{default:i(()=>t[6]||(t[6]=[u("Tipo de Contrato",-1)])),_:1,__:[6]}),e("div",ge,[e("label",{class:$(["flex items-center space-x-2 cursor-pointer p-2 rounded-md flex-1 justify-center transition-all duration-200",{"bg-muted":a(s).investment_contract_type==="abierta","opacity-60":a(s).investment_contract_type!=="abierta"}])},[z(e("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=n=>a(s).investment_contract_type=n),value:"abierta",class:"sr-only"},null,512),[[N,a(s).investment_contract_type]]),t[7]||(t[7]=e("span",null,"Abierto",-1))],2),e("label",{class:$(["flex items-center space-x-2 cursor-pointer p-2 rounded-md flex-1 justify-center transition-all duration-200",{"bg-muted":a(s).investment_contract_type==="cerrada","opacity-60":a(s).investment_contract_type!=="cerrada"}])},[z(e("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=n=>a(s).investment_contract_type=n),value:"cerrada",class:"sr-only"},null,512),[[N,a(s).investment_contract_type]]),t[8]||(t[8]=e("span",null,"Cerrado",-1))],2)])]),e("div",ve,[o(a(v),{for:"amount",class:"text-center text-lg"},{default:i(()=>t[9]||(t[9]=[u("Inversi√≥n",-1)])),_:1,__:[9]}),e("div",be,[o(a(x),{type:"button",onClick:U,variant:"outline",size:"icon",class:"h-14 w-14 rounded-full [touch-action:manipulation]",disabled:parseFloat(a(s).amount)<=2e5},{default:i(()=>[o(a(se),{class:"h-8 w-8"})]),_:1},8,["disabled"]),o(a(V),{id:"amount",type:"text",value:E.value,required:"",placeholder:"Inversi√≥n",readonly:"",class:"h-16 w-48 text-center font-bold text-2xl"},null,8,["value"]),o(a(x),{type:"button",onClick:R,variant:"outline",size:"icon",class:"h-14 w-14 rounded-full [touch-action:manipulation]",disabled:parseFloat(a(s).amount)>=1e7},{default:i(()=>[o(a(ne),{class:"h-8 w-8"})]),_:1},8,["disabled"])]),o(r,{message:a(s).errors.amount},null,8,["message"])]),I.value.length>0?(c(),m("div",xe,[o(a(v),{class:"text-base"},{default:i(()=>t[10]||(t[10]=[u("Vista Previa de Pagos",-1)])),_:1,__:[10]}),e("div",ye,[e("table",he,[t[11]||(t[11]=e("thead",{class:"border-b"},[e("tr",{class:"text-muted-foreground"},[e("th",{class:"p-2 text-left font-medium"},"Descripci√≥n"),e("th",{class:"p-2 text-right font-medium"},"Monto"),e("th",{class:"p-2 text-right font-medium"},"Fecha Pago")])],-1)),e("tbody",null,[(c(!0),m(w,null,D(I.value,(n,f)=>(c(),m("tr",{key:f,class:"border-b last:border-none"},[e("td",Ce,p(n.label),1),e("td",we,p(n.formattedValue),1),e("td",Pe,p(n.date),1)]))),128))])])])])):S("",!0),o(a(x),{type:"button",onClick:t[2]||(t[2]=n=>y.value=2),class:"w-full",disabled:!a(s).amount},{default:i(()=>t[12]||(t[12]=[u(" Siguiente ",-1)])),_:1,__:[12]},8,["disabled"])])):y.value===2?(c(),m("div",ke,[e("div",De,[o(a(v),null,{default:i(()=>t[15]||(t[15]=[u("Elige d√≥nde realizar el pago",-1)])),_:1,__:[15]}),e("div",Se,[(c(!0),m(w,null,D(j.value,n=>(c(),m("div",{key:n.name,onClick:f=>h.value=n,class:$(["flex flex-col items-center justify-center p-3 border rounded-lg cursor-pointer transition-all",{"ring-2 ring-primary border-primary":h.value.name===n.name}])},[e("img",{src:n.logo,alt:n.name,class:"h-12 w-12 object-contain mb-2"},null,8,je),e("span",Fe,p(n.name),1)],10,$e))),128))])]),e("div",Ie,[e("p",Me,"Realiza la transferencia al siguiente n√∫mero de "+p(h.value.name)+":",1),e("p",qe,p(h.value.phone),1)]),e("div",ze,[o(a(v),{for:"receipt",class:"text-base"},{default:i(()=>t[16]||(t[16]=[u("Adjunta tu comprobante de pago",-1)])),_:1,__:[16]}),o(a(V),{id:"receipt",type:"file",onInput:t[3]||(t[3]=n=>a(s).receipt=n.target.files?.[0]??null),accept:"image/*",required:""}),o(r,{message:a(s).errors.receipt},null,8,["message"])]),e("div",Ne,[o(a(x),{type:"button",variant:"outline",onClick:t[4]||(t[4]=n=>y.value=1),class:"w-1/3"},{default:i(()=>t[17]||(t[17]=[u("Atr√°s",-1)])),_:1,__:[17]}),o(a(x),{type:"submit",class:"w-2/3",disabled:a(s).processing||!a(s).receipt},{default:i(()=>[a(s).processing?(c(),K(l,{key:0,class:"h-4 w-4 animate-spin"})):S("",!0),t[18]||(t[18]=u(" Confirmar y Generar ",-1))]),_:1,__:[18]},8,["disabled"])])])):S("",!0)],32)]),_:1})]),_:1},8,["open"])]),_:1})]),_:1})],64)}}});export{Ke as default};
